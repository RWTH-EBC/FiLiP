

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>filip.clients.ngsi_v2.quantumleap &mdash; FiLiP 0.7.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/autodoc_pydantic.css" />

  
      <script src="../../../../_static/jquery.js"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
      <script src="../../../../_static/doctools.js"></script>
      <script src="../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../contents.html" class="icon icon-home">
            FiLiP
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../index.html">FiLiP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/index.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing.html">Contribute as a user</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing.html#contribute-as-a-developer">Contribute as a developer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../about/index.html">About FiLiP</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../contents.html">FiLiP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../contents.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">filip.clients.ngsi_v2.quantumleap</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for filip.clients.ngsi_v2.quantumleap</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">TimeSeries Module for QuantumLeap API Client</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">inf</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">deque</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">itertools</span><span class="w"> </span><span class="kn">import</span> <span class="n">count</span><span class="p">,</span> <span class="n">chain</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Deque</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">urllib.parse</span><span class="w"> </span><span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">AnyHttpUrl</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic.type_adapter</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypeAdapter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">filip</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">filip.clients.base_http_client</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseHttpClient</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">filip.models.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">FiwareHeader</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">filip.models.ngsi_v2.subscriptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Message</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">filip.models.ngsi_ld.context</span><span class="w"> </span><span class="kn">import</span> <span class="n">MessageLD</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">filip.models.ngsi_v2.timeseries</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">AggrPeriod</span><span class="p">,</span>
    <span class="n">AggrMethod</span><span class="p">,</span>
    <span class="n">AggrScope</span><span class="p">,</span>
    <span class="n">AttributeValues</span><span class="p">,</span>
    <span class="n">TimeSeries</span><span class="p">,</span>
    <span class="n">TimeSeriesHeader</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">filip.clients.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseHttpClientException</span>


<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="QuantumLeapClient"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">QuantumLeapClient</span><span class="p">(</span><span class="n">BaseHttpClient</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Implements functions to use the FIWARE&#39;s QuantumLeap, which subscribes to an</span>
<span class="sd">    Orion Context Broker and stores the subscription data in a time series</span>
<span class="sd">    database (CrateDB). Further Information:</span>
<span class="sd">    https://smartsdk.github.io/ngsi-timeseries-api/#quantumleap</span>
<span class="sd">    https://app.swaggerhub.com/apis/heikkilv/quantumleap-api/</span>

<span class="sd">    Args:</span>
<span class="sd">        url: url of the quantumleap service</span>
<span class="sd">        session (Optional):</span>
<span class="sd">        fiware_header:</span>
<span class="sd">        **kwargs:</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">session</span><span class="p">:</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fiware_header</span><span class="p">:</span> <span class="n">FiwareHeader</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="c1"># set service url</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">url</span> <span class="ow">or</span> <span class="n">settings</span><span class="o">.</span><span class="n">QL_URL</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span> <span class="n">fiware_header</span><span class="o">=</span><span class="n">fiware_header</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>

    <span class="c1"># META API ENDPOINTS</span>
<div class="viewcode-block" id="QuantumLeapClient.get_version"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.get_version">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets version of QuantumLeap-Service.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dictionary with response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="s2">&quot;version&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="n">res</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">BaseHttpClientException</span><span class="p">(</span>
                <span class="n">message</span><span class="o">=</span><span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="n">err</span><span class="o">.</span><span class="n">response</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">err</span></div>

<div class="viewcode-block" id="QuantumLeapClient.get_health"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.get_health">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_health</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This endpoint is intended for administrators of QuantumLeap. Using the</span>
<span class="sd">        information returned by this endpoint they can diagnose problems in the</span>
<span class="sd">        service or its dependencies. This information is also useful for cloud</span>
<span class="sd">        tools such as orchestrators and load balancers with rules based on</span>
<span class="sd">        health-checks. Due to the lack of a standardized response format, we</span>
<span class="sd">        base the implementation on the draft of</span>
<span class="sd">        https://inadarei.github.io/rfc-healthcheck/</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dictionary with response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="s2">&quot;health&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="n">res</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">BaseHttpClientException</span><span class="p">(</span>
                <span class="n">message</span><span class="o">=</span><span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="n">err</span><span class="o">.</span><span class="n">response</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">err</span></div>

<div class="viewcode-block" id="QuantumLeapClient.post_config"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.post_config">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">post_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        (To Be Implemented) Customize your persistence configuration to</span>
<span class="sd">        better suit your needs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Endpoint to be implemented..&quot;</span><span class="p">)</span></div>

    <span class="c1"># INPUT API ENDPOINTS</span>
<div class="viewcode-block" id="QuantumLeapClient.post_notification"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.post_notification">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">post_notification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notification</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Message</span><span class="p">,</span> <span class="n">MessageLD</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Notify QuantumLeap the arrival of a new NGSI notification.</span>

<span class="sd">        Args:</span>
<span class="sd">            notification: Notification Message Object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="s2">&quot;v2/notify&quot;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">notification</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="n">data_set</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="s2">&quot;subscriptionId&quot;</span><span class="p">:</span> <span class="n">notification</span><span class="o">.</span><span class="n">subscriptionId</span><span class="p">}</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data_set</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Could not post notification for subscription id &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">notification</span><span class="o">.</span><span class="n">subscriptionId</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log_error</span><span class="p">(</span><span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">BaseHttpClientException</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">err</span></div>

<div class="viewcode-block" id="QuantumLeapClient.post_subscription"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.post_subscription">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">post_subscription</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">cb_url</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AnyHttpUrl</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">ql_url</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AnyHttpUrl</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">id_pattern</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">attributes</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">observed_attributes</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">notified_attributes</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">throttling</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">time_index_attribute</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Subscribe QL to process Orion notifications of certain type.</span>
<span class="sd">        This endpoint simplifies the creation of the subscription in orion</span>
<span class="sd">        that will generate the notifications to be consumed by QuantumLeap in</span>
<span class="sd">        order to save historical records. If you want an advanced specification</span>
<span class="sd">        of the notifications, you can always create the subscription in orion</span>
<span class="sd">        at your will. This endpoint just aims to simplify the common use case.</span>

<span class="sd">        Args:</span>
<span class="sd">            cb_url:</span>
<span class="sd">                url of the context broker</span>
<span class="sd">            ql_url:</span>
<span class="sd">                The url where Orion can reach QuantumLeap. Do not include</span>
<span class="sd">                specific paths.</span>
<span class="sd">            entity_type (String):</span>
<span class="sd">                The type of entities for which to create a</span>
<span class="sd">                subscription, so as to persist historical data of entities of</span>
<span class="sd">                this type.</span>
<span class="sd">            entity_id (String):</span>
<span class="sd">                Id of the entity to track. If specified, it</span>
<span class="sd">                takes precedence over the idPattern parameter.</span>
<span class="sd">            id_pattern (String): The pattern covering the entity ids for which</span>
<span class="sd">                to subscribe. If not specified, QL will track all entities of</span>
<span class="sd">                the specified type.</span>
<span class="sd">            attributes (String): Comma-separated list of attribute names to</span>
<span class="sd">                track.</span>
<span class="sd">            observed_attributes (String): Comma-separated list of attribute</span>
<span class="sd">                names to track.</span>
<span class="sd">            notified_attributes (String): Comma-separated list of attribute</span>
<span class="sd">                names to be used to restrict the data of which QL will keep a</span>
<span class="sd">                history.</span>
<span class="sd">            throttling (int): Minimal period of time in seconds which must</span>
<span class="sd">                elapse between two consecutive notifications.</span>
<span class="sd">            time_index_attribute (String): The name of a custom attribute to be</span>
<span class="sd">                used as a</span>
<span class="sd">            time index.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">DeprecationWarning</span><span class="p">(</span>
            <span class="s2">&quot;Subscription endpoint of Quantumleap API is &quot;</span>
            <span class="s2">&quot;deprecated, use the ORION subscription endpoint &quot;</span>
            <span class="s2">&quot;instead&quot;</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="QuantumLeapClient.delete_entity"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.delete_entity">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">entity_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given an entity (with type and id), delete all its historical records.</span>

<span class="sd">        Args:</span>
<span class="sd">            entity_id (String): Entity id is required.</span>
<span class="sd">            entity_type (Optional[String]): Entity type if entity_id alone</span>
<span class="sd">                can not uniquely define the entity.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RequestException, if entity was not found</span>
<span class="sd">            Exception, if deleting was not successful</span>

<span class="sd">        Returns:</span>
<span class="sd">            The entity_id of entity that is deleted.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v2/entities/</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">entity_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">entity_type</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># The deletion does not always resolves in a success even if an ok is</span>
        <span class="c1"># returned.</span>
        <span class="c1"># Try to delete multiple times with incrementing waits.</span>
        <span class="c1"># If the entity is no longer found the methode returns with a success</span>
        <span class="c1"># If the deletion attempt fails after the 10th try, raise an</span>
        <span class="c1"># Exception: it could not be deleted</span>
        <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">counter</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_entity_by_id</span><span class="p">(</span><span class="n">entity_id</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">entity_type</span><span class="o">=</span><span class="n">entity_type</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Entity id &#39;</span><span class="si">%s</span><span class="s2">&#39; successfully deleted!&quot;</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">entity_id</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">counter</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
            <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Could not delete QL entity of id </span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="QuantumLeapClient.delete_entity_type"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.delete_entity_type">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_entity_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given an entity type, delete all the historical records of all</span>
<span class="sd">        entities of such type.</span>
<span class="sd">        Args:</span>
<span class="sd">            entity_type (String): Type of entities data to be deleted.</span>
<span class="sd">        Returns:</span>
<span class="sd">            Entity type of the entities deleted.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v2/types/</span><span class="si">{</span><span class="n">entity_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Entities of type &#39;</span><span class="si">%s</span><span class="s2">&#39; successfully deleted!&quot;</span><span class="p">,</span> <span class="n">entity_type</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">entity_type</span>
            <span class="n">res</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Could not delete entities of type </span><span class="si">{</span><span class="n">entity_type</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log_error</span><span class="p">(</span><span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">BaseHttpClientException</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">err</span></div>

    <span class="c1"># QUERY API ENDPOINTS</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__query_builder</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">id_pattern</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrMethod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_period</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrPeriod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">to_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">last_n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">georel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">geometry</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">coords</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">attrs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_scope</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrScope</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Deque</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Private Function to call respective API endpoints, chops large</span>
<span class="sd">        requests into multiple single requests and merges the</span>
<span class="sd">        responses</span>

<span class="sd">        Args:</span>
<span class="sd">            url:</span>
<span class="sd">            entity_id:</span>
<span class="sd">            options:</span>
<span class="sd">            entity_type:</span>
<span class="sd">            aggr_method:</span>
<span class="sd">            aggr_period:</span>
<span class="sd">            from_date:</span>
<span class="sd">            to_date:</span>
<span class="sd">            last_n:</span>
<span class="sd">            limit:</span>
<span class="sd">                Maximum number of results to retrieve in a single response.</span>
<span class="sd">            offset:</span>
<span class="sd">                Offset to apply to the response results. For example, if the</span>
<span class="sd">                query was to return 10 results and you use an offset of 1, the</span>
<span class="sd">                response will return the last 9 values. Make sure you don&#39;t</span>
<span class="sd">                give more offset than the number of results.</span>
<span class="sd">            georel:</span>
<span class="sd">            geometry:</span>
<span class="sd">            coords:</span>
<span class="sd">            attrs:</span>
<span class="sd">            aggr_scope:</span>
<span class="sd">            id_pattern (str): The pattern covering the entity ids for which</span>
<span class="sd">                to subscribe. The pattern follow regular expressions (POSIX</span>
<span class="sd">                Extendede) e.g. &quot;.*&quot;, &quot;Room.*&quot;. Detail information:</span>
<span class="sd">                https://en.wikibooks.org/wiki/Regular_Expressions/POSIX-Extended_Regular_Expressions</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="n">id_pattern</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">entity_id</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="p">),</span> <span class="s2">&quot;Cannot have both id and idPattern as parameter.&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">max_records_per_request</span> <span class="o">=</span> <span class="mi">10000</span>
        <span class="c1"># create a double ending queue</span>
        <span class="n">res_q</span><span class="p">:</span> <span class="n">Deque</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([])</span>

        <span class="k">if</span> <span class="n">options</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">options</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">entity_type</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">entity_type</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">aggr_method</span><span class="p">:</span>
            <span class="n">aggr_method</span> <span class="o">=</span> <span class="n">AggrMethod</span><span class="p">(</span><span class="n">aggr_method</span><span class="p">)</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;aggrMethod&quot;</span><span class="p">:</span> <span class="n">aggr_method</span><span class="o">.</span><span class="n">value</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">aggr_period</span><span class="p">:</span>
            <span class="n">aggr_period</span> <span class="o">=</span> <span class="n">AggrPeriod</span><span class="p">(</span><span class="n">aggr_period</span><span class="p">)</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;aggrPeriod&quot;</span><span class="p">:</span> <span class="n">aggr_period</span><span class="o">.</span><span class="n">value</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">from_date</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;fromDate&quot;</span><span class="p">:</span> <span class="n">from_date</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">to_date</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;toDate&quot;</span><span class="p">:</span> <span class="n">to_date</span><span class="p">})</span>
        <span class="c1"># These values are required for the integrated pagination mechanism</span>
        <span class="c1"># maximum items per request</span>
        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="n">inf</span>
        <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">georel</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;georel&quot;</span><span class="p">:</span> <span class="n">georel</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">coords</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;coords&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">geometry</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">geometry</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">attrs</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;attrs&quot;</span><span class="p">:</span> <span class="n">attrs</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">aggr_scope</span><span class="p">:</span>
            <span class="n">aggr_scope</span> <span class="o">=</span> <span class="n">AggrScope</span><span class="p">(</span><span class="n">aggr_scope</span><span class="p">)</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;aggr_scope&quot;</span><span class="p">:</span> <span class="n">aggr_scope</span><span class="o">.</span><span class="n">value</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">entity_id</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">id_pattern</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;idPattern&quot;</span><span class="p">:</span> <span class="n">id_pattern</span><span class="p">})</span>

        <span class="c1"># This loop will chop large requests into smaller junks.</span>
        <span class="c1"># The individual functions will then merge the final response models</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">count</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_records_per_request</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">params</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">i</span>

                <span class="n">params</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">limit</span> <span class="o">-</span> <span class="n">i</span><span class="p">,</span> <span class="n">max_records_per_request</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">break</span>

                <span class="k">if</span> <span class="n">last_n</span><span class="p">:</span>
                    <span class="n">params</span><span class="p">[</span><span class="s2">&quot;lastN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">last_n</span> <span class="o">-</span> <span class="n">i</span><span class="p">,</span> <span class="n">max_records_per_request</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;lastN&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">break</span>

                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Received: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

                    <span class="c1"># revert append direction when using last_n</span>
                    <span class="k">if</span> <span class="n">last_n</span><span class="p">:</span>
                        <span class="n">res_q</span><span class="o">.</span><span class="n">appendleft</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">res_q</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
                <span class="n">res</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>

            <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span>
                    <span class="ow">and</span> <span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;Not Found&quot;</span>
                    <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">res_q</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
                <span class="p">):</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Could not load entity data&quot;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log_error</span><span class="p">(</span><span class="n">err</span><span class="o">=</span><span class="n">err</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">BaseHttpClientException</span><span class="p">(</span>
                        <span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="n">err</span><span class="o">.</span><span class="n">response</span>
                    <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">err</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully retrieved entity data&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res_q</span>

    <span class="c1"># v2/entities</span>
<div class="viewcode-block" id="QuantumLeapClient.get_entities"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.get_entities">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_entities</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">id_pattern</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">to_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeSeriesHeader</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get list of all available entities and their context information</span>
<span class="sd">        about EntityType and last update date.</span>

<span class="sd">        Args:</span>
<span class="sd">            entity_type (str): Comma-separated list of entity types whose data</span>
<span class="sd">                are to be included in the response. Use only one (no comma)</span>
<span class="sd">                when required. If used to resolve ambiguity for the given</span>
<span class="sd">                entityId, make sure the given entityId exists for this</span>
<span class="sd">                entityType.</span>
<span class="sd">            id_pattern (str): The pattern covering the entity ids for which</span>
<span class="sd">                to subscribe. The pattern follow regular expressions (POSIX</span>
<span class="sd">                Extendede) e.g. &quot;.*&quot;, &quot;Room.*&quot;. Detail information:</span>
<span class="sd">                https://en.wikibooks.org/wiki/Regular_Expressions/POSIX-Extended_Regular_Expressions</span>
<span class="sd">            from_date (str): The starting date and time (inclusive) from which</span>
<span class="sd">                the context information is queried. Must be in ISO8601 format</span>
<span class="sd">                (e.g., 2018-01-05T15:44:34)</span>
<span class="sd">            to_date (str): The final date and time (inclusive) from which the</span>
<span class="sd">                context information is queried. Must be in ISO8601 format</span>
<span class="sd">                (e.g., 2018-01-05T15:44:34).</span>
<span class="sd">            limit (int): Maximum number of results to be retrieved.</span>
<span class="sd">                Default value : 10000</span>
<span class="sd">            offset (int): Offset for the results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of TimeSeriesHeader</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="s2">&quot;v2/entities&quot;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__query_builder</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">id_pattern</span><span class="o">=</span><span class="n">id_pattern</span><span class="p">,</span>
            <span class="n">entity_type</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span>
            <span class="n">to_date</span><span class="o">=</span><span class="n">to_date</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">ta</span> <span class="o">=</span> <span class="n">TypeAdapter</span><span class="p">(</span><span class="n">List</span><span class="p">[</span><span class="n">TimeSeriesHeader</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">ta</span><span class="o">.</span><span class="n">validate_python</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span></div>

    <span class="c1"># /entities/{entityId}</span>
<div class="viewcode-block" id="QuantumLeapClient.get_entity_by_id"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.get_entity_by_id">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_entity_by_id</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attrs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrMethod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_period</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrPeriod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">to_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">last_n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">georel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">geometry</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">coords</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimeSeries</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        History of N attributes of a given entity instance</span>
<span class="sd">        For example, query max water level of the central tank throughout the</span>
<span class="sd">        last year. Queries can get more</span>
<span class="sd">        sophisticated with the use of filters and query attributes.</span>

<span class="sd">        Args:</span>
<span class="sd">            entity_id (String): Entity id is required.</span>
<span class="sd">            attrs (String):</span>
<span class="sd">                Comma-separated list of attribute names whose data are to be</span>
<span class="sd">                included in the response. The attributes are retrieved in the</span>
<span class="sd">                order specified by this parameter. If not specified, all</span>
<span class="sd">                attributes are included in the response in arbitrary order.</span>
<span class="sd">            entity_type (String): Comma-separated list of entity types whose</span>
<span class="sd">                data are to be included in the response.</span>
<span class="sd">            aggr_method (String):</span>
<span class="sd">                The function to apply to the raw data filtered by the query</span>
<span class="sd">                parameters. If not given, the returned data are the same raw</span>
<span class="sd">                inserted data.</span>

<span class="sd">                Allowed values: count, sum, avg, min, max</span>
<span class="sd">            aggr_period (String):</span>
<span class="sd">                If not defined, the aggregation will apply to all the values</span>
<span class="sd">                contained in the search result. If defined, the aggregation</span>
<span class="sd">                function will instead be applied N times, once for each</span>
<span class="sd">                period, and all those results will be considered for the</span>
<span class="sd">                response. For example, a query asking for the average</span>
<span class="sd">                temperature of an attribute will typically return 1 value.</span>
<span class="sd">                However, with an aggregationPeriod of day, you get the daily</span>
<span class="sd">                average of the temperature instead (more than one value</span>
<span class="sd">                assuming you had measurements across many days within the</span>
<span class="sd">                scope of your search result). aggrPeriod must be accompanied</span>
<span class="sd">                by an aggrMethod, and the aggrMethod will be applied to all</span>
<span class="sd">                the numeric attributes specified in attrs; the rest of the</span>
<span class="sd">                non-numerical attrs will be ignored. By default, the response</span>
<span class="sd">                is grouped by entity_id. See aggrScope to create aggregation</span>
<span class="sd">                across entities:</span>

<span class="sd">                Allowed values: year, month, day, hour, minute, second</span>

<span class="sd">            from_date (String):</span>
<span class="sd">                The starting date and time (inclusive) from which the context</span>
<span class="sd">                information is queried. Must be in ISO8601 format (e.g.,</span>
<span class="sd">                2018-01-05T15:44:34)</span>
<span class="sd">            to_date (String):</span>
<span class="sd">                The final date and time (inclusive) from which the context</span>
<span class="sd">                information is queried. Must be in ISO8601 format (e.g.,</span>
<span class="sd">                2018-01-05T15:44:34)</span>
<span class="sd">            last_n (int):</span>
<span class="sd">                Used to request only the last N values that satisfy the</span>
<span class="sd">                request conditions.</span>
<span class="sd">            limit (int): Maximum number of results to be retrieved.</span>
<span class="sd">                Default value : 10000</span>
<span class="sd">            offset (int):</span>
<span class="sd">                Offset to apply to the response results.</span>
<span class="sd">            georel (String):</span>
<span class="sd">                It specifies a spatial relationship between matching entities</span>
<span class="sd">                and a reference shape (geometry). This parameter is used to</span>
<span class="sd">                perform geographical queries with the same semantics as in the</span>
<span class="sd">                FIWARE-NGSI v2 Specification. Full details can be found in the</span>
<span class="sd">                Geographical Queries section of the specification:</span>
<span class="sd">                https://fiware.github.io/specifications/ngsiv2/stable/.</span>
<span class="sd">            geometry (String):</span>
<span class="sd">                Required if georel is specified.  point, line, polygon, box</span>
<span class="sd">            coords (String):</span>
<span class="sd">                Optional but required if georel is specified. This parameter</span>
<span class="sd">                defines the reference shape (geometry) in terms of WGS 84</span>
<span class="sd">                coordinates and has the same semantics as in the</span>
<span class="sd">                FIWARE-NGSI v2 Specification, except we only accept coordinates</span>
<span class="sd">                in decimal degrees---e.g. 40.714,-74.006 is okay, but not</span>
<span class="sd">                40 42&#39; 51&#39;&#39;,74 0&#39; 21&#39;&#39;. Full details can be found in the</span>
<span class="sd">                Geographical Queries section of the specification:</span>
<span class="sd">                https://fiware.github.io/specifications/ngsiv2/stable/.</span>
<span class="sd">            options (String): Key value pair options.</span>

<span class="sd">        Returns:</span>
<span class="sd">            TimeSeries</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v2/entities/</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">res_q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__query_builder</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span>
            <span class="n">entity_type</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
            <span class="n">aggr_method</span><span class="o">=</span><span class="n">aggr_method</span><span class="p">,</span>
            <span class="n">aggr_period</span><span class="o">=</span><span class="n">aggr_period</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span>
            <span class="n">to_date</span><span class="o">=</span><span class="n">to_date</span><span class="p">,</span>
            <span class="n">last_n</span><span class="o">=</span><span class="n">last_n</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
            <span class="n">georel</span><span class="o">=</span><span class="n">georel</span><span class="p">,</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span>
            <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># merge response chunks</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">res_q</span><span class="o">.</span><span class="n">popleft</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">res_q</span><span class="p">:</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">TimeSeries</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">res</span></div>

    <span class="c1"># /entities/{entityId}/value</span>
<div class="viewcode-block" id="QuantumLeapClient.get_entity_values_by_id"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.get_entity_values_by_id">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_entity_values_by_id</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attrs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrMethod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_period</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrPeriod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">to_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">last_n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">georel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">geometry</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">coords</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimeSeries</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        History of N attributes (values only) of a given entity instance</span>
<span class="sd">        For example, query the average pressure, temperature and humidity (</span>
<span class="sd">        values only, no metadata) of this</span>
<span class="sd">        month in the weather station WS1.</span>

<span class="sd">        Args:</span>
<span class="sd">            entity_id (String): Entity id is required.</span>
<span class="sd">            attrs (String): Comma-separated list of attribute names</span>
<span class="sd">            entity_type (String): Comma-separated list of entity types whose</span>
<span class="sd">                data are to be included in the response.</span>
<span class="sd">            aggr_method (String): The function to apply to the raw data</span>
<span class="sd">                filtered. count, sum, avg, min, max</span>
<span class="sd">            aggr_period (String): year, month, day, hour, minute, second</span>
<span class="sd">            from_date (String): Starting date and time inclusive.</span>
<span class="sd">            to_date (String): Final date and time inclusive.</span>
<span class="sd">            last_n (int): Request only the last N values.</span>
<span class="sd">            limit (int): Maximum number of results to be retrieved.</span>
<span class="sd">                Default value : 10000</span>
<span class="sd">            offset (int): Offset for the results.</span>
<span class="sd">            georel (String): Geographical pattern</span>
<span class="sd">            geometry (String): Required if georel is specified.  point, line,</span>
<span class="sd">                polygon, box</span>
<span class="sd">            coords (String): Required if georel is specified.</span>
<span class="sd">                e.g. 40.714,-74.006</span>
<span class="sd">            options (String): Key value pair options.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Response Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v2/entities/</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">/value&quot;</span><span class="p">)</span>
        <span class="n">res_q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__query_builder</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span>
            <span class="n">entity_type</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
            <span class="n">aggr_method</span><span class="o">=</span><span class="n">aggr_method</span><span class="p">,</span>
            <span class="n">aggr_period</span><span class="o">=</span><span class="n">aggr_period</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span>
            <span class="n">to_date</span><span class="o">=</span><span class="n">to_date</span><span class="p">,</span>
            <span class="n">last_n</span><span class="o">=</span><span class="n">last_n</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
            <span class="n">georel</span><span class="o">=</span><span class="n">georel</span><span class="p">,</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span>
            <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># merge response chunks</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="p">(</span><span class="n">entityId</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span> <span class="o">**</span><span class="n">res_q</span><span class="o">.</span><span class="n">popleft</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">res_q</span><span class="p">:</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">TimeSeries</span><span class="p">(</span><span class="n">entityId</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span> <span class="o">**</span><span class="n">item</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">res</span></div>

    <span class="c1"># /entities/{entityId}/attrs/{attrName}</span>
<div class="viewcode-block" id="QuantumLeapClient.get_entity_attr_by_id"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.get_entity_attr_by_id">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_entity_attr_by_id</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">attr_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrMethod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_period</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrPeriod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">to_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">last_n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">georel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">geometry</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">coords</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimeSeries</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        History of an attribute of a given entity instance</span>
<span class="sd">        For example, query max water level of the central tank throughout the</span>
<span class="sd">        last year. Queries can get more</span>
<span class="sd">        sophisticated with the use of filters and query attributes.</span>

<span class="sd">        Args:</span>
<span class="sd">            entity_id (String): Entity id is required.</span>
<span class="sd">            attr_name (String): The attribute name is required.</span>
<span class="sd">            entity_type (String): Comma-separated list of entity types whose</span>
<span class="sd">                data are to be included in the response.</span>
<span class="sd">            aggr_method (String): The function to apply to the raw data</span>
<span class="sd">                filtered. count, sum, avg, min, max</span>
<span class="sd">            aggr_period (String): year, month, day, hour, minute, second</span>
<span class="sd">            from_date (String): Starting date and time inclusive.</span>
<span class="sd">            to_date (String): Final date and time inclusive.</span>
<span class="sd">            last_n (int): Request only the last N values.</span>
<span class="sd">            limit (int): Maximum number of results to be retrieved.</span>
<span class="sd">                Default value : 10000</span>
<span class="sd">            offset (int): Offset for the results.</span>
<span class="sd">            georel (String): Geographical pattern</span>
<span class="sd">            geometry (String): Required if georel is specified.  point, line,</span>
<span class="sd">                polygon, box</span>
<span class="sd">            coords (String): Required if georel is specified.</span>
<span class="sd">                e.g. 40.714,-74.006</span>
<span class="sd">            options (String): Key value pair options.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Response Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v2/entities/</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">/attrs&quot;</span> <span class="sa">f</span><span class="s2">&quot;/</span><span class="si">{</span><span class="n">attr_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">req_q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__query_builder</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span>
            <span class="n">entity_type</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
            <span class="n">aggr_method</span><span class="o">=</span><span class="n">aggr_method</span><span class="p">,</span>
            <span class="n">aggr_period</span><span class="o">=</span><span class="n">aggr_period</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span>
            <span class="n">to_date</span><span class="o">=</span><span class="n">to_date</span><span class="p">,</span>
            <span class="n">last_n</span><span class="o">=</span><span class="n">last_n</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
            <span class="n">georel</span><span class="o">=</span><span class="n">georel</span><span class="p">,</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span>
            <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># merge response chunks</span>
        <span class="n">first</span> <span class="o">=</span> <span class="n">req_q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="p">(</span>
            <span class="n">entityId</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span>
            <span class="n">index</span><span class="o">=</span><span class="n">first</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">),</span>
            <span class="n">attributes</span><span class="o">=</span><span class="p">[</span><span class="n">AttributeValues</span><span class="p">(</span><span class="o">**</span><span class="n">first</span><span class="p">)],</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">req_q</span><span class="p">:</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                <span class="n">TimeSeries</span><span class="p">(</span>
                    <span class="n">entityId</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span>
                    <span class="n">index</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">),</span>
                    <span class="n">attributes</span><span class="o">=</span><span class="p">[</span><span class="n">AttributeValues</span><span class="p">(</span><span class="o">**</span><span class="n">item</span><span class="p">)],</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">res</span></div>

    <span class="c1"># /entities/{entityId}/attrs/{attrName}/value</span>
<div class="viewcode-block" id="QuantumLeapClient.get_entity_attr_values_by_id"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.get_entity_attr_values_by_id">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_entity_attr_values_by_id</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">attr_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrMethod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_period</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrPeriod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">to_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">last_n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">georel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">geometry</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">coords</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimeSeries</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        History of an attribute (values only) of a given entity instance</span>
<span class="sd">        Similar to the previous, but focusing on the values regardless of the</span>
<span class="sd">        metadata.</span>

<span class="sd">        Args:</span>
<span class="sd">            entity_id (String): Entity id is required.</span>
<span class="sd">            attr_name (String): The attribute name is required.</span>
<span class="sd">            entity_type (String): Comma-separated list of entity types whose</span>
<span class="sd">                data are to be included in the response.</span>
<span class="sd">            aggr_method (String): The function to apply to the raw data</span>
<span class="sd">                filtered. count, sum, avg, min, max</span>
<span class="sd">            aggr_period (String): year, month, day, hour, minute, second</span>
<span class="sd">            from_date (String): Starting date and time inclusive.</span>
<span class="sd">            to_date (String): Final date and time inclusive.</span>
<span class="sd">            last_n (int): Request only the last N values.</span>
<span class="sd">            limit (int): Maximum number of results to be retrieved.</span>
<span class="sd">                Default value : 10000</span>
<span class="sd">            offset (int): Offset for the results.</span>
<span class="sd">            georel (String): Geographical pattern</span>
<span class="sd">            geometry (String): Required if georel is specified.  point, line,</span>
<span class="sd">                polygon, box</span>
<span class="sd">            coords (String): Required if georel is specified.</span>
<span class="sd">                e.g. 40.714,-74.006</span>
<span class="sd">            options (String): Key value pair options.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Response Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v2/entities/</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">/attrs&quot;</span> <span class="sa">f</span><span class="s2">&quot;/</span><span class="si">{</span><span class="n">attr_name</span><span class="si">}</span><span class="s2">/value&quot;</span>
        <span class="p">)</span>
        <span class="n">res_q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__query_builder</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span>
            <span class="n">entity_type</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
            <span class="n">aggr_method</span><span class="o">=</span><span class="n">aggr_method</span><span class="p">,</span>
            <span class="n">aggr_period</span><span class="o">=</span><span class="n">aggr_period</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span>
            <span class="n">to_date</span><span class="o">=</span><span class="n">to_date</span><span class="p">,</span>
            <span class="n">last_n</span><span class="o">=</span><span class="n">last_n</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
            <span class="n">georel</span><span class="o">=</span><span class="n">georel</span><span class="p">,</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span>
            <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># merge response chunks</span>
        <span class="n">first</span> <span class="o">=</span> <span class="n">res_q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="p">(</span>
            <span class="n">entityId</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span>
            <span class="n">index</span><span class="o">=</span><span class="n">first</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">),</span>
            <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
                <span class="n">AttributeValues</span><span class="p">(</span><span class="n">attrName</span><span class="o">=</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">first</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;values&quot;</span><span class="p">))</span>
            <span class="p">],</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">res_q</span><span class="p">:</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                <span class="n">TimeSeries</span><span class="p">(</span>
                    <span class="n">entityId</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span>
                    <span class="n">index</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">),</span>
                    <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
                        <span class="n">AttributeValues</span><span class="p">(</span><span class="n">attrName</span><span class="o">=</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;values&quot;</span><span class="p">))</span>
                    <span class="p">],</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">res</span></div>

    <span class="c1"># /types/{entityType}</span>
<div class="viewcode-block" id="QuantumLeapClient.get_entity_by_type"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.get_entity_by_type">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_entity_by_type</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attrs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">id_pattern</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrMethod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_period</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrPeriod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">to_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">last_n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">georel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">geometry</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">coords</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_scope</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrScope</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeSeries</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        History of N attributes of N entities of the same type.</span>
<span class="sd">        For example, query the average pressure, temperature and humidity of</span>
<span class="sd">        this month in all the weather stations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v2/types/</span><span class="si">{</span><span class="n">entity_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">res_q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__query_builder</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span>
            <span class="n">id_pattern</span><span class="o">=</span><span class="n">id_pattern</span><span class="p">,</span>
            <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span>
            <span class="n">aggr_method</span><span class="o">=</span><span class="n">aggr_method</span><span class="p">,</span>
            <span class="n">aggr_period</span><span class="o">=</span><span class="n">aggr_period</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span>
            <span class="n">to_date</span><span class="o">=</span><span class="n">to_date</span><span class="p">,</span>
            <span class="n">last_n</span><span class="o">=</span><span class="n">last_n</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
            <span class="n">georel</span><span class="o">=</span><span class="n">georel</span><span class="p">,</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span>
            <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span>
            <span class="n">aggr_scope</span><span class="o">=</span><span class="n">aggr_scope</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># merge chunks of response</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TimeSeries</span><span class="p">(</span><span class="n">entityType</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span> <span class="o">**</span><span class="n">item</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">res_q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entities&quot;</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">res_q</span><span class="p">:</span>
            <span class="n">chunk</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">TimeSeries</span><span class="p">(</span><span class="n">entityType</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span> <span class="o">**</span><span class="n">item</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">chunk</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entities&quot;</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="k">for</span> <span class="n">new</span><span class="p">,</span> <span class="n">old</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">res</span><span class="p">):</span>
                <span class="n">old</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">new</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">res</span></div>

    <span class="c1"># /types/{entityType}/value</span>
<div class="viewcode-block" id="QuantumLeapClient.get_entity_values_by_type"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.get_entity_values_by_type">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_entity_values_by_type</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attrs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">id_pattern</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrMethod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_period</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrPeriod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">to_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">last_n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">georel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">geometry</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">coords</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_scope</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrScope</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeSeries</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        History of N attributes (values only) of N entities of the same type.</span>
<span class="sd">        For example, query the average pressure, temperature and humidity (</span>
<span class="sd">        values only, no metadata) of this month in</span>
<span class="sd">        all the weather stations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v2/types/</span><span class="si">{</span><span class="n">entity_type</span><span class="si">}</span><span class="s2">/value&quot;</span><span class="p">)</span>
        <span class="n">res_q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__query_builder</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span>
            <span class="n">id_pattern</span><span class="o">=</span><span class="n">id_pattern</span><span class="p">,</span>
            <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span>
            <span class="n">entity_type</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
            <span class="n">aggr_method</span><span class="o">=</span><span class="n">aggr_method</span><span class="p">,</span>
            <span class="n">aggr_period</span><span class="o">=</span><span class="n">aggr_period</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span>
            <span class="n">to_date</span><span class="o">=</span><span class="n">to_date</span><span class="p">,</span>
            <span class="n">last_n</span><span class="o">=</span><span class="n">last_n</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
            <span class="n">georel</span><span class="o">=</span><span class="n">georel</span><span class="p">,</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span>
            <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span>
            <span class="n">aggr_scope</span><span class="o">=</span><span class="n">aggr_scope</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># merge chunks of response</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TimeSeries</span><span class="p">(</span><span class="n">entityType</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span> <span class="o">**</span><span class="n">item</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">res_q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;values&quot;</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">res_q</span><span class="p">:</span>
            <span class="n">chunk</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">TimeSeries</span><span class="p">(</span><span class="n">entityType</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span> <span class="o">**</span><span class="n">item</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">chunk</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;values&quot;</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="k">for</span> <span class="n">new</span><span class="p">,</span> <span class="n">old</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">res</span><span class="p">):</span>
                <span class="n">old</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">new</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">res</span></div>

    <span class="c1"># /types/{entityType}/attrs/{attrName}</span>
<div class="viewcode-block" id="QuantumLeapClient.get_entity_attr_by_type"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.get_entity_attr_by_type">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_entity_attr_by_type</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">attr_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">id_pattern</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrMethod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_period</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrPeriod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">to_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">last_n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">georel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">geometry</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">coords</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_scope</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrScope</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeSeries</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        History of an attribute of N entities of the same type.</span>
<span class="sd">        For example, query the pressure measurements of this month in all the</span>
<span class="sd">        weather stations. Note in the response,</span>
<span class="sd">        the index and values arrays are parallel. Also, when using</span>
<span class="sd">        aggrMethod, the aggregation is done by-entity</span>
<span class="sd">        instance. In this case, the index array is just the fromDate and</span>
<span class="sd">        toDate values user specified in the request</span>
<span class="sd">        (if any).</span>

<span class="sd">        Args:</span>
<span class="sd">            entity_type (String): Entity type is required.</span>
<span class="sd">            attr_name (String): The attribute name is required.</span>
<span class="sd">            entity_id (String): Comma-separated list of entity ids whose data</span>
<span class="sd">                are to be included in the response.</span>
<span class="sd">            aggr_method (String): The function to apply to the raw data</span>
<span class="sd">                filtered. count, sum, avg, min, max</span>
<span class="sd">            aggr_period (String): year, month, day, hour, minute, second</span>
<span class="sd">            aggr_scope (str): Optional. (This parameter is not yet supported).</span>
<span class="sd">                When the query results cover historical data for multiple</span>
<span class="sd">                entities instances, you can define the aggregation method to be</span>
<span class="sd">                applied for each entity instance [entity] or across</span>
<span class="sd">                them [global]</span>
<span class="sd">            from_date (String): Starting date and time inclusive.</span>
<span class="sd">            to_date (String): Final date and time inclusive.</span>
<span class="sd">            last_n (int): Request only the last N values.</span>
<span class="sd">            limit (int): Maximum number of results to be retrieved.</span>
<span class="sd">                Default value : 10000</span>
<span class="sd">            offset (int): Offset for the results.</span>
<span class="sd">            georel (String): Geographical pattern</span>
<span class="sd">            geometry (String): Required if georel is specified.  point, line,</span>
<span class="sd">                polygon, box</span>
<span class="sd">            coords (String): Required if georel is specified.</span>
<span class="sd">                e.g. 40.714,-74.006</span>
<span class="sd">            options (String): Key value pair options.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Response Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v2/types/</span><span class="si">{</span><span class="n">entity_type</span><span class="si">}</span><span class="s2">/attrs&quot;</span> <span class="sa">f</span><span class="s2">&quot;/</span><span class="si">{</span><span class="n">attr_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">res_q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__query_builder</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span>
            <span class="n">id_pattern</span><span class="o">=</span><span class="n">id_pattern</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span>
            <span class="n">entity_type</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
            <span class="n">aggr_method</span><span class="o">=</span><span class="n">aggr_method</span><span class="p">,</span>
            <span class="n">aggr_period</span><span class="o">=</span><span class="n">aggr_period</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span>
            <span class="n">to_date</span><span class="o">=</span><span class="n">to_date</span><span class="p">,</span>
            <span class="n">last_n</span><span class="o">=</span><span class="n">last_n</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
            <span class="n">georel</span><span class="o">=</span><span class="n">georel</span><span class="p">,</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span>
            <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span>
            <span class="n">aggr_scope</span><span class="o">=</span><span class="n">aggr_scope</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># merge chunks of response</span>
        <span class="n">first</span> <span class="o">=</span> <span class="n">res_q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TimeSeries</span><span class="p">(</span>
                <span class="n">index</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">),</span>
                <span class="n">entityType</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
                <span class="n">entityId</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entityId&quot;</span><span class="p">),</span>
                <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
                    <span class="n">AttributeValues</span><span class="p">(</span>
                        <span class="n">attrName</span><span class="o">=</span><span class="n">first</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attrName&quot;</span><span class="p">),</span> <span class="n">values</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;values&quot;</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">],</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">first</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entities&quot;</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">res_q</span><span class="p">:</span>
            <span class="n">chunk</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">TimeSeries</span><span class="p">(</span>
                    <span class="n">index</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">),</span>
                    <span class="n">entityType</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
                    <span class="n">entityId</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entityId&quot;</span><span class="p">),</span>
                    <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
                        <span class="n">AttributeValues</span><span class="p">(</span>
                            <span class="n">attrName</span><span class="o">=</span><span class="n">chunk</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attrName&quot;</span><span class="p">),</span> <span class="n">values</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;values&quot;</span><span class="p">)</span>
                        <span class="p">)</span>
                    <span class="p">],</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">chunk</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entities&quot;</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="k">for</span> <span class="n">new</span><span class="p">,</span> <span class="n">old</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">res</span><span class="p">):</span>
                <span class="n">old</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">new</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">res</span></div>

    <span class="c1"># /types/{entityType}/attrs/{attrName}/value</span>
<div class="viewcode-block" id="QuantumLeapClient.get_entity_attr_values_by_type"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.get_entity_attr_values_by_type">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_entity_attr_values_by_type</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">attr_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">id_pattern</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrMethod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_period</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrPeriod</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">to_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">last_n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">georel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">geometry</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">coords</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggr_scope</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AggrScope</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeSeries</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        History of an attribute (values only) of N entities of the same type.</span>
<span class="sd">        For example, query the average pressure (values only, no metadata) of</span>
<span class="sd">        this month in all the weather stations.</span>

<span class="sd">        Args:</span>
<span class="sd">            aggr_scope:</span>
<span class="sd">            entity_type (String): Entity type is required.</span>
<span class="sd">            attr_name (String): The attribute name is required.</span>
<span class="sd">            entity_id (String): Comma-separated list of entity ids whose data</span>
<span class="sd">                are to be included in the response.</span>
<span class="sd">            aggr_method (String): The function to apply to the raw data</span>
<span class="sd">                filtered. count, sum, avg, min, max</span>
<span class="sd">            aggr_period (String): year, month, day, hour, minute, second</span>
<span class="sd">            aggr_scope (String):</span>
<span class="sd">            from_date (String): Starting date and time inclusive.</span>
<span class="sd">            to_date (String): Final date and time inclusive.</span>
<span class="sd">            last_n (int): Request only the last N values.</span>
<span class="sd">            limit (int): Maximum number of results to be retrieved.</span>
<span class="sd">                Default value : 10000</span>
<span class="sd">            offset (int): Offset for the results.</span>
<span class="sd">            georel (String): Geographical pattern</span>
<span class="sd">            geometry (String): Required if georel is specified.  point, line,</span>
<span class="sd">                polygon, box</span>
<span class="sd">            coords (String): Required if georel is specified.</span>
<span class="sd">                e.g. 40.714,-74.006</span>
<span class="sd">            options (String): Key value pair options.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Response Model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;v2/types/</span><span class="si">{</span><span class="n">entity_type</span><span class="si">}</span><span class="s2">/attrs/&quot;</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">attr_name</span><span class="si">}</span><span class="s2">/value&quot;</span>
        <span class="p">)</span>
        <span class="n">res_q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__query_builder</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span>
            <span class="n">id_pattern</span><span class="o">=</span><span class="n">id_pattern</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span>
            <span class="n">entity_type</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
            <span class="n">aggr_method</span><span class="o">=</span><span class="n">aggr_method</span><span class="p">,</span>
            <span class="n">aggr_period</span><span class="o">=</span><span class="n">aggr_period</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span>
            <span class="n">to_date</span><span class="o">=</span><span class="n">to_date</span><span class="p">,</span>
            <span class="n">last_n</span><span class="o">=</span><span class="n">last_n</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
            <span class="n">georel</span><span class="o">=</span><span class="n">georel</span><span class="p">,</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span>
            <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span>
            <span class="n">aggr_scope</span><span class="o">=</span><span class="n">aggr_scope</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># merge chunks of response</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TimeSeries</span><span class="p">(</span>
                <span class="n">index</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">),</span>
                <span class="n">entityType</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
                <span class="n">entityId</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entityId&quot;</span><span class="p">),</span>
                <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
                    <span class="n">AttributeValues</span><span class="p">(</span><span class="n">attrName</span><span class="o">=</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;values&quot;</span><span class="p">))</span>
                <span class="p">],</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">res_q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;values&quot;</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">res_q</span><span class="p">:</span>
            <span class="n">chunk</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">TimeSeries</span><span class="p">(</span>
                    <span class="n">index</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">),</span>
                    <span class="n">entityType</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
                    <span class="n">entityId</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entityId&quot;</span><span class="p">),</span>
                    <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
                        <span class="n">AttributeValues</span><span class="p">(</span><span class="n">attrName</span><span class="o">=</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;values&quot;</span><span class="p">))</span>
                    <span class="p">],</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">chunk</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;values&quot;</span><span class="p">)</span>
            <span class="p">]</span>

            <span class="k">for</span> <span class="n">new</span><span class="p">,</span> <span class="n">old</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">res</span><span class="p">):</span>
                <span class="n">old</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">new</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span></div>

    <span class="c1"># v2/attrs</span>
<div class="viewcode-block" id="QuantumLeapClient.get_entity_by_attrs"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.get_entity_by_attrs">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_entity_by_attrs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">to_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeSeries</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get list of timeseries data grouped by each existing attribute name.</span>
<span class="sd">        The timeseries data include all entities corresponding to each</span>
<span class="sd">        attribute name as well as the index and values of this attribute in</span>
<span class="sd">        this entity.</span>

<span class="sd">        Args:</span>
<span class="sd">            entity_type (str): Comma-separated list of entity types whose data</span>
<span class="sd">                are to be included in the response. Use only one (no comma)</span>
<span class="sd">                when required. If used to resolve ambiguity for the given</span>
<span class="sd">                entityId, make sure the given entityId exists for this</span>
<span class="sd">                entityType.</span>
<span class="sd">            from_date (str): The starting date and time (inclusive) from which</span>
<span class="sd">                the context information is queried. Must be in ISO8601 format</span>
<span class="sd">                (e.g., 2018-01-05T15:44:34)</span>
<span class="sd">            to_date (str): The final date and time (inclusive) from which the</span>
<span class="sd">                context information is queried. Must be in ISO8601 format</span>
<span class="sd">                (e.g., 2018-01-05T15:44:34).</span>
<span class="sd">            limit (int): Maximum number of results to be retrieved.</span>
<span class="sd">                Default value : 10000</span>
<span class="sd">            offset (int): Offset for the results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of TimeSeriesEntities</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="s2">&quot;v2/attrs&quot;</span><span class="p">)</span>
        <span class="n">res_q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__query_builder</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">entity_type</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span>
            <span class="n">to_date</span><span class="o">=</span><span class="n">to_date</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">first</span> <span class="o">=</span> <span class="n">res_q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span>
            <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform_attr_response_model</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">first</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attrs&quot;</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">res_q</span><span class="p">:</span>
            <span class="n">chunk</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span>
                <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform_attr_response_model</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">chunk</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attrs&quot;</span><span class="p">))</span>
            <span class="p">)</span>

            <span class="k">for</span> <span class="n">new</span><span class="p">,</span> <span class="n">old</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">res</span><span class="p">):</span>
                <span class="n">old</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">new</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="p">)</span></div>

    <span class="c1"># v2/attrs/{attr_name}</span>
<div class="viewcode-block" id="QuantumLeapClient.get_entity_by_attr_name"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.get_entity_by_attr_name">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_entity_by_attr_name</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">attr_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">to_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeSeries</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get list of all entities containing this attribute name, as well as</span>
<span class="sd">        getting the index and values of this attribute in every corresponding</span>
<span class="sd">        entity.</span>

<span class="sd">        Args:</span>
<span class="sd">            attr_name (str): The attribute name in interest.</span>
<span class="sd">            entity_type (str): Comma-separated list of entity types whose data</span>
<span class="sd">                are to be included in the response. Use only one (no comma)</span>
<span class="sd">                when required. If used to resolve ambiguity for the given</span>
<span class="sd">                entityId, make sure the given entityId exists for this</span>
<span class="sd">                entityType.</span>
<span class="sd">            from_date (str): The starting date and time (inclusive) from which</span>
<span class="sd">                the context information is queried. Must be in ISO8601 format</span>
<span class="sd">                (e.g., 2018-01-05T15:44:34)</span>
<span class="sd">            to_date (str): The final date and time (inclusive) from which the</span>
<span class="sd">                context information is queried. Must be in ISO8601 format</span>
<span class="sd">                (e.g., 2018-01-05T15:44:34).</span>
<span class="sd">            limit (int): Maximum number of results to be retrieved.</span>
<span class="sd">                Default value : 10000</span>
<span class="sd">            offset (int): Offset for the results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of TimeSeries</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;/v2/attrs/</span><span class="si">{</span><span class="n">attr_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">res_q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__query_builder</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">entity_type</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span>
            <span class="n">to_date</span><span class="o">=</span><span class="n">to_date</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">first</span> <span class="o">=</span> <span class="n">res_q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform_attr_response_model</span><span class="p">(</span><span class="n">first</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">res_q</span><span class="p">:</span>
            <span class="n">chunk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform_attr_response_model</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">new</span><span class="p">,</span> <span class="n">old</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">res</span><span class="p">):</span>
                <span class="n">old</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">new</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="p">)</span></div>

<div class="viewcode-block" id="QuantumLeapClient.transform_attr_response_model"><a class="viewcode-back" href="../../../../code/filip.clients.ngsi_v2.html#filip.clients.ngsi_v2.quantumleap.QuantumLeapClient.transform_attr_response_model">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">transform_attr_response_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr_response</span><span class="p">):</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">attr_name</span> <span class="o">=</span> <span class="n">attr_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attrName&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">entity_group</span> <span class="ow">in</span> <span class="n">attr_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;types&quot;</span><span class="p">):</span>
            <span class="n">timeseries</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">entity</span><span class="p">:</span> <span class="n">TimeSeries</span><span class="p">(</span>
                    <span class="n">entityId</span><span class="o">=</span><span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entityId&quot;</span><span class="p">),</span>
                    <span class="n">entityType</span><span class="o">=</span><span class="n">entity_group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entityType&quot;</span><span class="p">),</span>
                    <span class="n">index</span><span class="o">=</span><span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">),</span>
                    <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
                        <span class="n">AttributeValues</span><span class="p">(</span><span class="n">attrName</span><span class="o">=</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;values&quot;</span><span class="p">))</span>
                    <span class="p">],</span>
                <span class="p">),</span>
                <span class="n">entity_group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entities&quot;</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timeseries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">res</span><span class="p">)</span></div></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2025, RWTH Aachen University, E.ON Energy Research Center, Institute for Energy Efficient Buildings and Indoor Climate.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>